@using Microsoft.AspNetCore.Http
@using EmcureNPD.Web.Controllers
@using Microsoft.AspNetCore.Mvc.Localization
@inject IHttpContextAccessor HttpContextAccessor
@inject Microsoft.Extensions.Localization.IStringLocalizer<MastersController> MasterLocalizer
@inject Microsoft.Extensions.Localization.IStringLocalizer<EmcureNPD.Resource.Shared> SharedLocalizer
@using EmcureNPD.Utility.Utility
@using EmcureNPD.Utility.Enums
@using EmcureNPD.Business.Models
@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration

@model EmcureNPD.Business.Models.PidfPbfFormEntity
@{
    string jsVersion = @Configuration.GetSection("StaticJS")["version"];
}

<div id="SavePIDFModel">
    @*<div class="card">
        <div id="PIDFFormTemplate">
        @{
        await Html.RenderPartialAsync("PIDF", new PIDFEntity());
        }
        </div>
        </div>
        <div class="card">
        <div class="card-header ">
        <h5 class="mb-0"><b>Internal Patent Details</b></h5>
        <div class="card-tools">
        <button type="button" class="btn btn-tool" data-toggle="collapse" data-target="#idpCollapse" title="Collapse">
        <i class="fas fa-angle-double-down"></i>
        </button>
        </div>
        <div id="idpCollapse" class="collapse">
        <div class="card-body">
        @Html.Partial("~/Views/PIDF/PIDF.cshtml",new PIDFEntity())
        </div>
        </div>
        </div>
        </div>
        <div class="card">
        <div class="card-header ">
        <h5 class="mb-0"><b>Commercial Details</b></h5>
        <div class="card-tools">
        <button type="button" class="btn btn-tool" data-toggle="collapse" data-target="#comCollapse" title="Collapse">
        <i class="fas fa-angle-double-down"></i>
        </button>
        </div>
        <div id="comCollapse" class="collapse">
        <div class="card-body">
        @Html.Partial("~/Views/PIDF/PIDF.cshtml",new PIDFEntity())
        </div>
        </div>
        </div>
        </div>*@
    <div id="dvPIDFAccrdion"></div>
    <div class="content-header">
        <h2 class="m-0">Internal Patent Details</h2>
    </div>
    <div class="container-fluid background-white-card" id="dvPBFContainer">
        <input type="hidden" id="hdnIPDIsView" value="@(Context.Request.Query["IsView"] == "1" ? "1" : "0")" />
        <div class="row">
            <div class="col-md-12">
                <div class="card card-primary card-tabs">
                    <div class="card-header p-0 pt-1">
                        <ul class="nav nav-tabs text-center m-0" id="custom-tabs-two-tab" role="tablist">
                        </ul>
                    </div>

                    <div class="card-body">
                        <div class="tab-content" id="custom-tabs-two-tabContent">
                            

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12 text-end">
                <div class="form-group">
                    <button type="submit" class="btn btn-primary operationButton" onclick="SaveClick();">@SharedLocalizer["Submit"]</button>
                    <button type="submit" class="btn btn-info operationButton" onClick="SaveDraftClick();">@SharedLocalizer["SaveDraft"]</button>
                    <a class="btn btn-danger operationButton" asp-action="PIDFList" asp-controller="PIDF" asp-route-ScreenId="6">@SharedLocalizer["Cancel"]</a>

                </div>
            </div>
        </div>
    </div>

</div>
@section MyScripts {

    @Html.Partial("_DataTablePartial")
<script type="text/javascript" src="~/js/Custom/DynamicDataTable.js?v=@jsVersion"></script>
<script type="text/javascript" src="~/js/Custom/PIDF/PBFForm.js?v=@jsVersion"></script>
    @*    <script type="text/javascript" src="~/js/Custom/PBF/Analytical/PBFAnalytical.js"></script>*@
<link rel="stylesheet" href="~/AdminLTE/plugins/select2/css/select2.min.css" />
<script type="text/javascript" src="~/AdminLTE/plugins/select2/js/select2.min.js"></script>
<link href="/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var tabList = [].slice.call(document.querySelectorAll("#tabs a"));
        var tabs = $('#tabList');

        tabList.forEach(function (tab) {
            var tabTrigger = new bootstrap.Tab(tab);

            tab.addEventListener("click", function (event) {
                event.preventDefault();
                tabTrigger.show();
            });
            tabs.append('<div class="tab-pane fade" id="' + tab + '">');

        });
    });
    //#region Setup API Url
    var PFBAPIPIDFList = "@EmcureNPD.Web.Helpers.APIURLHelper.GetPFBAPIPIDFList";
    var GetAllPBF = "@EmcureNPD.Web.Helpers.APIURLHelper.GetPBFDropdown";
    var GetPBFReadonlyDataByPIDFId = "@EmcureNPD.Web.Helpers.APIURLHelper.GetPBFReadonlyDataByPIDFId";
    var _selectBusinessUnit = "@UtilityHelper.Decreypt(Convert.ToString(Context.Request.Query["bui"]))";
    var _PIDFID = "@UtilityHelper.Decreypt(Convert.ToString(Context.Request.Query["pidfid"]))";    
     var GetActiveBusinessUnit = "@EmcureNPD.Web.Helpers.APIURLHelper.GetActiveBusinessUnit";
      var _PBFPartialURL = "@Url.Action("PBFForm", "PIDF")";
    // #endregion

    //#region Static Messae Init
    var EditLabel = "@SharedLocalizer["Edit"]";
    var DeleteLabel = "@SharedLocalizer["Delete"]";
    var ErrorMessage = "@SharedLocalizer["Error"]";
    var RecordDelete = "@SharedLocalizer["RecordDelete"]";
    var AddLabel = "@SharedLocalizer["Add"]";
    var UpdateLabel = "@SharedLocalizer["Update"]";
        @*var successCallBack = '@TempData[EmcureNPD.Web.Helpers.PIDFHelper.SuccessMessage]';
        if (successCallBack)
        {
        toastr.success(successCallBack);
        }*@

        //#endregion
</script>
<script>
    $('.card-header').click(function () {
        $(this).find('i').toggleClass('fas fa-angle-double-down fas fa-angle-double-up');
    });
</script>


}